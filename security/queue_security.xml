<odoo>
    <!-- Groupes de sécurité -->
    <record id="group_queue_user" model="res.groups">
        <field name="name">Queue User</field>
        <field name="category_id" ref="base.module_category_services"/>
    </record>

    <record id="group_queue_manager" model="res.groups">
        <field name="name">Queue Manager</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <record id="group_queue_admin" model="res.groups">
        <field name="name">Queue Administrator</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_queue_manager'))]"/>
    </record>

    <!-- Règles de sécurité pour les nouveaux modèles -->
    <record id="rule_queue_config_user" model="ir.rule">
        <field name="name">Queue Config: User Access</field>
        <field name="model_id" ref="model_queue_config"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <record id="rule_queue_performance_metrics_user" model="ir.rule">
        <field name="name">Queue Performance Metrics: User Access</field>
        <field name="model_id" ref="model_queue_performance_metrics"/>
        <field name="domain_force">[('service_id.active', '=', True)]</field>
        <field name="groups" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <record id="rule_queue_system_alerts_user" model="ir.rule">
        <field name="name">Queue System Alerts: User Access</field>
        <field name="model_id" ref="model_queue_system_alerts"/>
        <field name="domain_force">[('is_resolved', '=', False)]</field>
        <field name="groups" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <!-- Règles pour les wizards -->
    <record id="rule_queue_maintenance_wizard_user" model="ir.rule">
        <field name="name">Queue Maintenance Wizard: User Access</field>
        <field name="model_id" ref="model_queue_maintenance_wizard"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <record id="rule_queue_stats_wizard_user" model="ir.rule">
        <field name="name">Queue Stats Wizard: User Access</field>
        <field name="model_id" ref="model_queue_stats_wizard"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <!-- Configuration par défaut -->
    <record id="default_queue_settings" model="ir.config_parameter">
        <field name="key">queue_management.default_refresh_interval</field>
        <field name="value">15</field>
    </record>

    <record id="default_cache_duration" model="ir.config_parameter">
        <field name="key">queue_management.cache_duration_seconds</field>
        <field name="value">30</field>
    </record>

    <record id="default_max_waiting_alert" model="ir.config_parameter">
        <field name="key">queue_management.max_waiting_alert_threshold</field>
        <field name="value">15</field>
    </record>

    <!-- Groupes de sécurité -->
    <record id="group_queue_user" model="res.groups">
        <field name="name">Agent File d'Attente</field>
        <field name="comment">Peut gérer les tickets et appeler les clients</field>
        <field name="category_id" ref="base.module_category_services"/>
    </record>

    <record id="group_queue_manager" model="res.groups">
        <field name="name">Manager Files d'Attente</field>
        <field name="comment">Peut configurer les services et consulter les statistiques</field>
        <field name="category_id" ref="base.module_category_services"/>
        <field name="implied_ids" eval="[(4, ref('group_queue_user'))]"/>
    </record>

    <!-- Règles d'accès -->
    <record id="access_queue_service_user" model="ir.model.access">
        <field name="name">queue.service.user</field>
        <field name="model_id" ref="model_queue_service"/>
        <field name="group_id" ref="group_queue_user"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="access_queue_service_manager" model="ir.model.access">
        <field name="name">queue.service.manager</field>
        <field name="model_id" ref="model_queue_service"/>
        <field name="group_id" ref="group_queue_manager"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Configuration des droits d'accès -->
    <record id="access_queue_ticket_user" model="ir.model.access">
        <field name="name">queue.ticket.user</field>
        <field name="model_id" ref="model_queue_ticket"/>
        <field name="group_id" ref="base.group_user"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="access_queue_ticket_manager" model="ir.model.access">
        <field name="name">queue.ticket.manager</field>
        <field name="model_id" ref="model_queue_ticket"/>
        <field name="group_id" ref="base.group_system"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Règles de sécurité par enregistrement -->
    <!-- <record id="queue_ticket_rule_own_service" model="ir.rule">
        <field name="name">Ticket: accès par service</field>
        <field name="model_id" ref="model_queue_ticket"/>
        <field name="domain_force">[('service_id.user_ids', 'in', [user.id])]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record> -->

    <record id="queue_ticket_rule_manager_all" model="ir.rule">
        <field name="name">Ticket: managers accès complet</field>
        <field name="model_id" ref="model_queue_ticket"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('base.group_system'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>